.TH STORMDB 1 "July 2025" "stormdb v0.1.0" "User Commands"
.SH NAME
stormdb \- PostgreSQL performance testing and benchmarking tool

.SH SYNOPSIS
.B stormdb
[\fIOPTIONS\fR]

.SH DESCRIPTION
StormDB is a comprehensive PostgreSQL performance testing and benchmarking tool designed for realistic workload simulation. It features a plugin-based architecture supporting various workload types including e-commerce, IMDB, vector operations, and custom OLTP patterns.

.SH OPTIONS
.TP
.BR \-c ", " \-\-config =\fIFILE\fR
Path to configuration file (default: config.yaml)

.TP
.BR \-w ", " \-\-workload =\fITYPE\fR
Workload type to run (overrides config)

.TP
.BR \-d ", " \-\-duration =\fIDURATION\fR
Test duration (e.g., 30s, 1m, 2h)

.TP
.BR \-\-workers =\fINUM\fR
Number of worker threads (overrides config)

.TP
.BR \-\-connections =\fINUM\fR
Max connections in pool (overrides config)

.TP
.BR \-\-scale =\fINUM\fR
Scale factor for data generation (overrides config)

.TP
.BR \-\-host =\fIHOST\fR
Database host (overrides config)

.TP
.BR \-\-port =\fIPORT\fR
Database port (overrides config)

.TP
.BR \-\-dbname =\fIDBNAME\fR
Database name (overrides config)

.TP
.BR \-u ", " \-\-username =\fIUSER\fR
Database username (overrides config)

.TP
.BR \-p ", " \-\-password =\fIPASS\fR
Database password (overrides config)

.TP
.BR \-\-setup
Ensure schema exists (create if needed, but do not load data)

.TP
.BR \-r ", " \-\-rebuild
Rebuild: drop, recreate schema, and load data

.TP
.BR \-s ", " \-\-summary\-interval =\fIINTERVAL\fR
Periodic summary interval (e.g., 10s, 30s)

.TP
.BR \-\-no\-summary
Disable periodic summary reporting

.TP
.BR \-\-collect\-pg\-stats
Enable PostgreSQL statistics collection

.TP
.BR \-\-pg\-stat\-statements
Enable pg_stat_statements collection (requires extension)

.TP
.BR \-h ", " \-\-help
Show help message and exit

.TP
.BR \-V ", " \-\-version
Show version information and exit

.SH COMMANDS
.TP
.B version
Display version information including build details

.SH WORKLOAD TYPES
StormDB supports multiple workload types through its plugin system:

.TP
.B E-commerce Workloads
.RS
.TP
.B ecommerce, ecommerce_mixed
Advanced e-commerce platform with B2B features, vendor management, and AI-powered recommendations
.TP
.B ecommerce_read, ecommerce_write, ecommerce_analytics, ecommerce_oltp
Specialized e-commerce workload modes
.TP
.B ecommerce_basic, ecommerce_basic_mixed
Basic e-commerce patterns with standard OLTP operations
.TP
.B ecommerce_basic_read, ecommerce_basic_write, ecommerce_basic_analytics, ecommerce_basic_oltp
Specialized basic e-commerce modes
.RE

.TP
.B Vector Workloads
.RS
.TP
.B vector, vector_cosine, vector_inner
Vector similarity search operations using pgvector extension
.TP
.B pgvector_ingestion_single, pgvector_ingestion_batch, pgvector_ingestion_copy
Vector data ingestion patterns
.TP
.B pgvector_read_indexed, pgvector_read_scan
Vector query patterns
.RE

.TP
.B IMDB Workloads
.RS
.TP
.B imdb, imdb_mixed, imdb_read, imdb_write
Movie database workloads with complex analytical queries
.TP
.B imdb_dump, imdb_sql
IMDB data loading and SQL execution modes
.RE

.TP
.B TPC-C Workload
.RS
.TP
.B tpcc
Industry-standard OLTP benchmark simulating order processing
.RE

.SH CONFIGURATION FILES
StormDB uses YAML configuration files for detailed workload specification. Key configuration sections:

.TP
.B database
Connection parameters (host, port, dbname, username, password, sslmode)

.TP
.B plugins
Plugin system configuration (paths, files, auto_load)

.TP
.B workload
Workload type and parameters

.TP
.B workers
Number of concurrent worker threads

.TP
.B duration
Test duration specification

.TP
.B scale
Data generation scale factor

.TP
.B metrics
Metrics collection configuration

.SH FILES
.TP
.B /etc/stormdb/config_tpcc.yaml
Default TPC-C workload configuration

.TP
.B /etc/stormdb/examples/
Example configuration files for all workload types

.TP
.B /usr/lib/stormdb/plugins/
Plugin shared libraries (.so files)

.TP
.B /usr/share/stormdb/
Static data files (SQL schemas, templates)

.TP
.B /usr/share/doc/stormdb/
Documentation files

.SH EXAMPLES
.TP
Run TPC-C workload with default configuration:
.B stormdb \-c /etc/stormdb/config_tpcc.yaml

.TP
Run e-commerce workload for 5 minutes with 10 workers:
.B stormdb \-\-workload ecommerce_mixed \-\-duration 5m \-\-workers 10

.TP
Set up schema and run basic e-commerce workload:
.B stormdb \-\-workload ecommerce_basic_mixed \-\-setup \-\-duration 30s

.TP
Run vector workload with custom database connection:
.B stormdb \-\-workload vector_cosine \-\-host localhost \-\-port 5432 \-\-dbname testdb

.TP
Run IMDB workload with detailed statistics collection:
.B stormdb \-\-workload imdb_mixed \-\-collect\-pg\-stats \-\-pg\-stat\-statements

.SH EXIT STATUS
.TP
.B 0
Successful completion

.TP
.B 1
General error (configuration, database connection, etc.)

.TP
.B 2
Command line parsing error

.SH SEE ALSO
.BR postgres (1),
.BR psql (1),
.BR pgbench (1)

.SH BUGS
Report bugs at: https://github.com/elchinoo/stormdb/issues

.SH AUTHOR
StormDB Team

.SH COPYRIGHT
Copyright (c) 2025 StormDB Team. Licensed under the MIT License.
